name: GHA-Sandbox
on:
  - push
  - pull_request
jobs:
  windows:
    name: Windows GHC test
    runs-on: windows-2019
    steps:
      - name: Checkout
        uses: actions/checkout@v2

      - name: Set up GHC
        uses: haskell/actions/setup@v1
        id: setup-haskell
        with:
          ghc-version: 8.10.7

      - name: Post GHC installation hackery
        shell: bash
        run: |
          cabal user-config update -a "extra-include-dirs: \"\""
          cabal user-config update -a "extra-lib-dirs: \"\""

      - name: Debugging
        shell: bash
        run: |
          echo $PATH
          echo $LIBRARY_PATH
          echo $C_INCLUDE_PATH
          cat "/c/cabal/config" || true
          cat "$CABAL_DIR/config" || true

      - name: Build
        shell: bash
        run: |
          cabal build
